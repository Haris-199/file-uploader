<div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-sm">
    <div class="card-header bg-light p-4">
      <h1 class="text-center fw-bold mb-3">Welcome!</h1>
      <p class="text-center text-muted m-0">Sign in to access your files and manage your storage.</p>
    </div>
    
    <div class="card-body">
      <form action="/signin" method="POST" class="needs-validation" novalidate>
        <div class="mb-3">
          <label for="username" class="form-label">Username</label>
          <input
            type="text"
            id="username"
            name="username"
            class="form-control"
            placeholder="Enter your username"
            autofocus
            required
            <% if (locals.username) { %>
             value="<%= locals.username %>"
            <% } %>
          />
          <div class="invalid-feedback">Please enter your username.</div>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            class="form-control"
            placeholder="Enter your password"
            required
          />
          <div class="invalid-feedback">Please enter your password.</div>
        </div>

        <div class="d-flex justify-content-center">
          <button type="submit" class="btn btn-primary fw-semibold">Sign In</button>
        </div>
      </form>
    </div>

    <div class="card-footer">
      <p class="text-center my-1">
        Don't have an account?
        <a href="/signup" class="text-primary fw-semibold text-decoration-none">Sign Up</a>
      </p>
    </div>
  </div>
</div>

<script>
  const usernameError = `<%= locals.usernameError || "" %>`;
  const usernameInput = document.getElementById("username");
  if (usernameError !== "") {
    usernameInput.classList.add("is-invalid");
    usernameInput.nextElementSibling.textContent = usernameError;

    usernameInput.addEventListener("input", function() {
      this.classList.remove("is-invalid");
      this.nextElementSibling.textContent = "Please enter your username.";
    }, { once: true });
  }

  const passwordError = `<%= locals.passwordError || "" %>`;
  const passwordInput = document.getElementById("password");
  if (passwordError !== "") {
    passwordInput.classList.add("is-invalid");
    passwordInput.nextElementSibling.textContent = passwordError;

    passwordInput.addEventListener("input", function() {
      this.classList.remove("is-invalid");
      this.nextElementSibling.textContent = "Please enter your password.";
    }, { once: true });
  }
</script>
